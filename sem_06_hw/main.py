# TODO –ó–∞–¥–∞–Ω–∏–µ No6.
# üìå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞.
#    –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ —Ç—Ä–µ—Ö —Ç–∞–±–ª–∏—Ü: —Ç–æ–≤–∞—Ä—ã, –∑–∞–∫–∞–∑—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.
#    –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö, –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è—Ö –∏ —Ü–µ–Ω–∞—Ö.
#    –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –º–∞–≥–∞–∑–∏–Ω–∞.
#    –¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑—ã –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–∫–∞–∑–∞—Ö, —Å–¥–µ–ª–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.
#    ‚óã –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
#      id (PRIMARY KEY), –∏–º—è, —Ñ–∞–º–∏–ª–∏—è, –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –∏ –ø–∞—Ä–æ–ª—å.
#    ‚óã –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è: id (PRIMARY KEY), –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ü–µ–Ω–∞.
#    ‚óã –¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:
#      id (PRIMARY KEY), id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (FOREIGN KEY), id —Ç–æ–≤–∞—Ä–∞ (FOREIGN KEY), –¥–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ –∏ —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞.
# üìå –°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª–∏ pydantic –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤ –ë–î –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ —Ç—Ä—ë—Ö —Ç–∞–±–ª–∏—Ü
#    (–∏—Ç–æ–≥–æ —à–µ—Å—Ç—å –º–æ–¥–µ–ª–µ–π).
# üìå –†–µ–∞–ª–∏–∑—É–π—Ç–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∏–∑ —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤, REST API (–∏—Ç–æ–≥–æ 15 –º–∞—Ä—à—Ä—É—Ç–æ–≤).
#    ‚óã –ß—Ç–µ–Ω–∏–µ –≤—Å–µ—Ö
#    ‚óã –ß—Ç–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ
#    ‚óã –ó–∞–ø–∏—Å—å
#    ‚óã –ò–∑–º–µ–Ω–µ–Ω–∏–µ
#    ‚óã –£–¥–∞–ª–µ–Ω–∏–µ

import uvicorn
from fastapi import FastAPI
from db import database
from routers import user, product, order, fake_data

app = FastAPI()


@app.on_event("startup")
async def startup():
    await database.connect()


@app.on_event("shutdown")
async def shutdown():
    await database.disconnect()


app.include_router(user.router, tags=["users"])
app.include_router(product.router, tags=["products"])
app.include_router(order.router, tags=["orders"])
app.include_router(fake_data.router, tags=["fake_data"])

if __name__ == '__main__':
    uvicorn.run(
        "main:app",
        host="127.0.0.1",
        port=8000,
        reload=True
    )
